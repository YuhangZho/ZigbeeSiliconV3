<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EmberZNet API Reference: For the EM35x SoC Platform: Trust Center</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EmberZNet API Reference: For the EM35x SoC Platform
   &#160;<span id="projectnumber">EmberZNet 6.8.1.0</span>
   </div>
   <div id="projectbrief">For the EFR32 and EM3xx Platforms</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__trust__center.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Trust Center<div class="ingroups"><a class="el" href="group__ember.html">EmberZNet Stack API Reference</a> &raquo; <a class="el" href="group__security.html">Security</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga67f4fbc374dce84651af2c8c4d57a318"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#ga67f4fbc374dce84651af2c8c4d57a318">EMBER_FORM_TRUST_CENTER_NETWORK_BITMASK</a></td></tr>
<tr class="memdesc:ga67f4fbc374dce84651af2c8c4d57a318"><td class="mdescLeft">&#160;</td><td class="mdescRight">A Trust Center device configuration bitmask example. The Trust Center is expected to be set up with a Network Key Preconfigured Link Key that is global throughout all devices on the Network. The decision whether or not to send the key in-the-clear is NOT controlled through this bitmask. It is controlled via the emberTrustCenterJoinHandler(...) function.  <a href="#ga67f4fbc374dce84651af2c8c4d57a318">More...</a><br /></td></tr>
<tr class="separator:ga67f4fbc374dce84651af2c8c4d57a318"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae8a8fea570328903562eb6cb45336ed7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#gae8a8fea570328903562eb6cb45336ed7">EMBER_FORM_DISTRIBUTED_TRUST_CENTER_NETWORK_BITMASK</a></td></tr>
<tr class="memdesc:gae8a8fea570328903562eb6cb45336ed7"><td class="mdescLeft">&#160;</td><td class="mdescRight">A coordinator device configuration bitmask example. The coordinator is expected to be set up with a Network Key and a Preconfigured Link Key that is global throughout all devices on the Network. The decision whether or not to send the key in-the-clear is decentralized. Each individual router can make this decision via the emberTrustCenterJoinHandler(...) function.  <a href="#gae8a8fea570328903562eb6cb45336ed7">More...</a><br /></td></tr>
<tr class="separator:gae8a8fea570328903562eb6cb45336ed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac1ba84fa212092295db74b6139ff68cc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#gac1ba84fa212092295db74b6139ff68cc">emberTrustCenterLinkKeyRequestPolicy</a>&#160;&#160;&#160;<a class="el" href="group__trust__center.html#ga45cf16ca62d57b62791cd57cf9a179e8">emberTrustCenterLinkKeyRequestPolicies</a>[<a class="el" href="group__trust__center.html#ga8a2a759ad06a09e71dabd934042adc18">emGetNetworkIndexForForkedGlobal</a>()]</td></tr>
<tr class="separator:gac1ba84fa212092295db74b6139ff68cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga014a329b9bfe7fdcc56e3d3ffdf1323a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#ga014a329b9bfe7fdcc56e3d3ffdf1323a">emberAppLinkKeyRequestPolicy</a>&#160;&#160;&#160;<a class="el" href="group__trust__center.html#ga03ab067cf8491b0918df78b08524ce50">emberAppLinkKeyRequestPolicies</a>[<a class="el" href="group__trust__center.html#ga8a2a759ad06a09e71dabd934042adc18">emGetNetworkIndexForForkedGlobal</a>()]</td></tr>
<tr class="separator:ga014a329b9bfe7fdcc56e3d3ffdf1323a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga7965584d8894b1d609b6a688477baac1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#ga7965584d8894b1d609b6a688477baac1">emberBroadcastNextNetworkKey</a> (<a class="el" href="structEmberKeyData.html">EmberKeyData</a> *key)</td></tr>
<tr class="memdesc:ga7965584d8894b1d609b6a688477baac1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Broadcasts a new encryption key but does not tell the nodes in the network to start using it.  <a href="#ga7965584d8894b1d609b6a688477baac1">More...</a><br /></td></tr>
<tr class="separator:ga7965584d8894b1d609b6a688477baac1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabc629fb2a3166dc1a75efec28c205f58"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#gabc629fb2a3166dc1a75efec28c205f58">emberSendUnicastNetworkKeyUpdate</a> (EmberNodeId targetShort, EmberEUI64 targetLong, <a class="el" href="structEmberKeyData.html">EmberKeyData</a> *newKey)</td></tr>
<tr class="memdesc:gabc629fb2a3166dc1a75efec28c205f58"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends a unicast update of the network key to the target device. The APS command will be encrypted using the device's current APS link key. On success, the bit ::EMBER_KEY_UNICAST_NWK_KEY_UPDATE_SENT will be set in the link key table entry for the device. When a successful call is made to <a class="el" href="group__trust__center.html#gad7df687b4305b8c264e13c6e48cadd69" title="Broadcasts a switch key message to tell all nodes to change to the sequence number of the previously ...">emberBroadcastNetworkKeySwitch()</a>, the bit will be cleared for all entries.  <a href="#gabc629fb2a3166dc1a75efec28c205f58">More...</a><br /></td></tr>
<tr class="separator:gabc629fb2a3166dc1a75efec28c205f58"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa54115c05ccb10d09b11c782fe3b7e3b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#gaa54115c05ccb10d09b11c782fe3b7e3b">emberUnicastCurrentNetworkKey</a> (EmberNodeId targetShort, EmberEUI64 targetLong, EmberNodeId parentShortId)</td></tr>
<tr class="memdesc:gaa54115c05ccb10d09b11c782fe3b7e3b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the network key to the target device. The APS command will be encrypted using the device's current APS link key. The call would fail if there is no link key avaialble.  <a href="#gaa54115c05ccb10d09b11c782fe3b7e3b">More...</a><br /></td></tr>
<tr class="separator:gaa54115c05ccb10d09b11c782fe3b7e3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad7df687b4305b8c264e13c6e48cadd69"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#gad7df687b4305b8c264e13c6e48cadd69">emberBroadcastNetworkKeySwitch</a> (void)</td></tr>
<tr class="memdesc:gad7df687b4305b8c264e13c6e48cadd69"><td class="mdescLeft">&#160;</td><td class="mdescRight">Broadcasts a switch key message to tell all nodes to change to the sequence number of the previously sent Alternate Encryption Key.  <a href="#gad7df687b4305b8c264e13c6e48cadd69">More...</a><br /></td></tr>
<tr class="separator:gad7df687b4305b8c264e13c6e48cadd69"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea7b346ab4db5443316930328033285b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ember__types.html#ga395f1f81009b39817c6ad771c398827b">EmberJoinDecision</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#gaea7b346ab4db5443316930328033285b">emberTrustCenterJoinHandler</a> (EmberNodeId newNodeId, EmberEUI64 newNodeEui64, <a class="el" href="group__ember__types.html#gae85447b46d5b9eae4ebca3e656646659">EmberDeviceUpdate</a> status, EmberNodeId parentOfNewNode)</td></tr>
<tr class="memdesc:gaea7b346ab4db5443316930328033285b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback to allow the application running on the Trust Center (which is the coordinator for ZigBee networks) to control which nodes are allowed to join the network. If the node is allowed to join, the trust center must decide whether to send the Network Key encrypted or unencrypted to the joining node.  <a href="#gaea7b346ab4db5443316930328033285b">More...</a><br /></td></tr>
<tr class="separator:gaea7b346ab4db5443316930328033285b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadaa9bc1ff2c7a6c6cedecb8b510ac058"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#gadaa9bc1ff2c7a6c6cedecb8b510ac058">emberBecomeTrustCenter</a> (<a class="el" href="structEmberKeyData.html">EmberKeyData</a> *newNetworkKey)</td></tr>
<tr class="memdesc:gadaa9bc1ff2c7a6c6cedecb8b510ac058"><td class="mdescLeft">&#160;</td><td class="mdescRight">Causes a coordinator to become the Trust Center when it is operating in a network that is not using one. It will send out an updated Network Key to all devices that will indicate a transition of the network to now use a Trust Center. The Trust Center should also switch all devices to using the new network key with a call to <a class="el" href="group__trust__center.html#gad7df687b4305b8c264e13c6e48cadd69" title="Broadcasts a switch key message to tell all nodes to change to the sequence number of the previously ...">emberBroadcastNetworkKeySwitch()</a>.  <a href="#gadaa9bc1ff2c7a6c6cedecb8b510ac058">More...</a><br /></td></tr>
<tr class="separator:gadaa9bc1ff2c7a6c6cedecb8b510ac058"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8a2a759ad06a09e71dabd934042adc18"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#ga8a2a759ad06a09e71dabd934042adc18">emGetNetworkIndexForForkedGlobal</a> (void)</td></tr>
<tr class="memdesc:ga8a2a759ad06a09e71dabd934042adc18"><td class="mdescLeft">&#160;</td><td class="mdescRight">This variable controls the policy that the Trust Center uses for determining whether to allow or deny requests for Trust Center link keys.  <a href="#ga8a2a759ad06a09e71dabd934042adc18">More...</a><br /></td></tr>
<tr class="separator:ga8a2a759ad06a09e71dabd934042adc18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf74958c082b2b0324f2ba340c3af70df"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#gaf74958c082b2b0324f2ba340c3af70df">emberSendRemoveDevice</a> (EmberNodeId destShort, EmberEUI64 destLong, EmberEUI64 deviceToRemoveLong)</td></tr>
<tr class="memdesc:gaf74958c082b2b0324f2ba340c3af70df"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends an APS remove device command to the destination. If the destination is an end device, this must be sent to the parent of the end device. In that case, the deviceToRemoveLong and the destLong will be different values. Otherwise, if a router is being asked to leave, those parameters will be the same. This command will be APS encrypted with the destination device's link key, which means a link key must be present.  <a href="#gaf74958c082b2b0324f2ba340c3af70df">More...</a><br /></td></tr>
<tr class="separator:gaf74958c082b2b0324f2ba340c3af70df"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga996c5ff3bd65e9e4bc5e25ae3a9478db"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#ga996c5ff3bd65e9e4bc5e25ae3a9478db">emberSendTrustCenterLinkKey</a> (EmberNodeId destinationNodeId, EmberEUI64 destinationEui64)</td></tr>
<tr class="memdesc:ga996c5ff3bd65e9e4bc5e25ae3a9478db"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sends the trust center link key to a node.  <a href="#ga996c5ff3bd65e9e4bc5e25ae3a9478db">More...</a><br /></td></tr>
<tr class="separator:ga996c5ff3bd65e9e4bc5e25ae3a9478db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga45cf16ca62d57b62791cd57cf9a179e8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ember__types.html#ga88c8cad59611e0760e7480c6e928968d">EmberTcLinkKeyRequestPolicy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#ga45cf16ca62d57b62791cd57cf9a179e8">emberTrustCenterLinkKeyRequestPolicies</a> []</td></tr>
<tr class="separator:ga45cf16ca62d57b62791cd57cf9a179e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga03ab067cf8491b0918df78b08524ce50"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__ember__types.html#ga105f881da2014d4fc25ab26745e83247">EmberAppLinkKeyRequestPolicy</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__trust__center.html#ga03ab067cf8491b0918df78b08524ce50">emberAppLinkKeyRequestPolicies</a> []</td></tr>
<tr class="memdesc:ga03ab067cf8491b0918df78b08524ce50"><td class="mdescLeft">&#160;</td><td class="mdescRight">This variable controls the policy that the Trust Center uses for determining whether to allow or deny requests for application link keys between device pairs. When a request is received and the policy is <a class="el" href="group__ember__types.html#gga88c8cad59611e0760e7480c6e928968dab2826b2bd8c4839687b91e7be2f37c28">EMBER_ALLOW_TC_LINK_KEY_REQUEST_AND_SEND_CURRENT_KEY</a>, the TC will generate a random key and send a copy to both devices encrypted with their individual link keys.  <a href="#ga03ab067cf8491b0918df78b08524ce50">More...</a><br /></td></tr>
<tr class="separator:ga03ab067cf8491b0918df78b08524ce50"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This file describes the routines used by the Trust Center to manage devices in the network. The Trust center decides whether to use preconfigured keys and manages passing out keys to joining and rejoining devices. The Trust Center also sends out new keys and decides when to start using them.</p>
<p>See <a class="el" href="trust-center_8h.html" title="EmberZNet security API See Security for documentation. ">trust-center.h</a> for source code </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gae8a8fea570328903562eb6cb45336ed7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae8a8fea570328903562eb6cb45336ed7">&#9670;&nbsp;</a></span>EMBER_FORM_DISTRIBUTED_TRUST_CENTER_NETWORK_BITMASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EMBER_FORM_DISTRIBUTED_TRUST_CENTER_NETWORK_BITMASK</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(<a class="code" href="group__ember__types.html#gad5a6d8ff4ca5c2ffe2e72b5c43ef6d08">EMBER_STANDARD_SECURITY_MODE</a>                             \</div><div class="line">   | <a class="code" href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1afb9a3bf4e0f2ff4c9a776f02acb52451">EMBER_TRUST_CENTER_GLOBAL_LINK_KEY</a>                     \</div><div class="line">   | <a class="code" href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1a9ab0193e1b549a6f2cb12a8246d6c038">EMBER_DISTRIBUTED_TRUST_CENTER_MODE</a>                    \</div><div class="line">   | <a class="code" href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1a501ae86ce4a6d010c24a7e572ebac586">EMBER_HAVE_NETWORK_KEY</a>                                 \</div><div class="line">   | <a class="code" href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1a88ceb932aac17acae98c25ce788ea81d">EMBER_HAVE_PRECONFIGURED_KEY</a>)</div><div class="ttc" id="group__ember__types_html_gga0f532d16cb984d8d532a121b0c09fbe1afb9a3bf4e0f2ff4c9a776f02acb52451"><div class="ttname"><a href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1afb9a3bf4e0f2ff4c9a776f02acb52451">EMBER_TRUST_CENTER_GLOBAL_LINK_KEY</a></div><div class="ttdef"><b>Definition:</b> ember-types.h:1843</div></div>
<div class="ttc" id="group__ember__types_html_gad5a6d8ff4ca5c2ffe2e72b5c43ef6d08"><div class="ttname"><a href="group__ember__types.html#gad5a6d8ff4ca5c2ffe2e72b5c43ef6d08">EMBER_STANDARD_SECURITY_MODE</a></div><div class="ttdeci">#define EMBER_STANDARD_SECURITY_MODE</div><div class="ttdoc">This is an EmberInitialSecurityBitmask value but it does not actually set anything. It is the default mode used by the ZigBee Pro stack. It is defined here so that no legacy code is broken by referencing it. </div><div class="ttdef"><b>Definition:</b> ember-types.h:1821</div></div>
<div class="ttc" id="group__ember__types_html_gga0f532d16cb984d8d532a121b0c09fbe1a9ab0193e1b549a6f2cb12a8246d6c038"><div class="ttname"><a href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1a9ab0193e1b549a6f2cb12a8246d6c038">EMBER_DISTRIBUTED_TRUST_CENTER_MODE</a></div><div class="ttdef"><b>Definition:</b> ember-types.h:1840</div></div>
<div class="ttc" id="group__ember__types_html_gga0f532d16cb984d8d532a121b0c09fbe1a88ceb932aac17acae98c25ce788ea81d"><div class="ttname"><a href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1a88ceb932aac17acae98c25ce788ea81d">EMBER_HAVE_PRECONFIGURED_KEY</a></div><div class="ttdef"><b>Definition:</b> ember-types.h:1876</div></div>
<div class="ttc" id="group__ember__types_html_gga0f532d16cb984d8d532a121b0c09fbe1a501ae86ce4a6d010c24a7e572ebac586"><div class="ttname"><a href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1a501ae86ce4a6d010c24a7e572ebac586">EMBER_HAVE_NETWORK_KEY</a></div><div class="ttdef"><b>Definition:</b> ember-types.h:1880</div></div>
</div><!-- fragment -->
<p>A coordinator device configuration bitmask example. The coordinator is expected to be set up with a Network Key and a Preconfigured Link Key that is global throughout all devices on the Network. The decision whether or not to send the key in-the-clear is decentralized. Each individual router can make this decision via the emberTrustCenterJoinHandler(...) function. </p>

</div>
</div>
<a id="ga67f4fbc374dce84651af2c8c4d57a318"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga67f4fbc374dce84651af2c8c4d57a318">&#9670;&nbsp;</a></span>EMBER_FORM_TRUST_CENTER_NETWORK_BITMASK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EMBER_FORM_TRUST_CENTER_NETWORK_BITMASK</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Value:</b><div class="fragment"><div class="line">(<a class="code" href="group__ember__types.html#gad5a6d8ff4ca5c2ffe2e72b5c43ef6d08">EMBER_STANDARD_SECURITY_MODE</a>                 \</div><div class="line">   | <a class="code" href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1afb9a3bf4e0f2ff4c9a776f02acb52451">EMBER_TRUST_CENTER_GLOBAL_LINK_KEY</a>         \</div><div class="line">   | <a class="code" href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1a501ae86ce4a6d010c24a7e572ebac586">EMBER_HAVE_NETWORK_KEY</a>                     \</div><div class="line">   | <a class="code" href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1a88ceb932aac17acae98c25ce788ea81d">EMBER_HAVE_PRECONFIGURED_KEY</a>)</div><div class="ttc" id="group__ember__types_html_gga0f532d16cb984d8d532a121b0c09fbe1afb9a3bf4e0f2ff4c9a776f02acb52451"><div class="ttname"><a href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1afb9a3bf4e0f2ff4c9a776f02acb52451">EMBER_TRUST_CENTER_GLOBAL_LINK_KEY</a></div><div class="ttdef"><b>Definition:</b> ember-types.h:1843</div></div>
<div class="ttc" id="group__ember__types_html_gad5a6d8ff4ca5c2ffe2e72b5c43ef6d08"><div class="ttname"><a href="group__ember__types.html#gad5a6d8ff4ca5c2ffe2e72b5c43ef6d08">EMBER_STANDARD_SECURITY_MODE</a></div><div class="ttdeci">#define EMBER_STANDARD_SECURITY_MODE</div><div class="ttdoc">This is an EmberInitialSecurityBitmask value but it does not actually set anything. It is the default mode used by the ZigBee Pro stack. It is defined here so that no legacy code is broken by referencing it. </div><div class="ttdef"><b>Definition:</b> ember-types.h:1821</div></div>
<div class="ttc" id="group__ember__types_html_gga0f532d16cb984d8d532a121b0c09fbe1a88ceb932aac17acae98c25ce788ea81d"><div class="ttname"><a href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1a88ceb932aac17acae98c25ce788ea81d">EMBER_HAVE_PRECONFIGURED_KEY</a></div><div class="ttdef"><b>Definition:</b> ember-types.h:1876</div></div>
<div class="ttc" id="group__ember__types_html_gga0f532d16cb984d8d532a121b0c09fbe1a501ae86ce4a6d010c24a7e572ebac586"><div class="ttname"><a href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1a501ae86ce4a6d010c24a7e572ebac586">EMBER_HAVE_NETWORK_KEY</a></div><div class="ttdef"><b>Definition:</b> ember-types.h:1880</div></div>
</div><!-- fragment -->
<p>A Trust Center device configuration bitmask example. The Trust Center is expected to be set up with a Network Key Preconfigured Link Key that is global throughout all devices on the Network. The decision whether or not to send the key in-the-clear is NOT controlled through this bitmask. It is controlled via the emberTrustCenterJoinHandler(...) function. </p>

</div>
</div>
<a id="ga014a329b9bfe7fdcc56e3d3ffdf1323a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga014a329b9bfe7fdcc56e3d3ffdf1323a">&#9670;&nbsp;</a></span>emberAppLinkKeyRequestPolicy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define emberAppLinkKeyRequestPolicy&#160;&#160;&#160;<a class="el" href="group__trust__center.html#ga03ab067cf8491b0918df78b08524ce50">emberAppLinkKeyRequestPolicies</a>[<a class="el" href="group__trust__center.html#ga8a2a759ad06a09e71dabd934042adc18">emGetNetworkIndexForForkedGlobal</a>()]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="gac1ba84fa212092295db74b6139ff68cc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac1ba84fa212092295db74b6139ff68cc">&#9670;&nbsp;</a></span>emberTrustCenterLinkKeyRequestPolicy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define emberTrustCenterLinkKeyRequestPolicy&#160;&#160;&#160;<a class="el" href="group__trust__center.html#ga45cf16ca62d57b62791cd57cf9a179e8">emberTrustCenterLinkKeyRequestPolicies</a>[<a class="el" href="group__trust__center.html#ga8a2a759ad06a09e71dabd934042adc18">emGetNetworkIndexForForkedGlobal</a>()]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gadaa9bc1ff2c7a6c6cedecb8b510ac058"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadaa9bc1ff2c7a6c6cedecb8b510ac058">&#9670;&nbsp;</a></span>emberBecomeTrustCenter()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a> emberBecomeTrustCenter </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEmberKeyData.html">EmberKeyData</a> *&#160;</td>
          <td class="paramname"><em>newNetworkKey</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Causes a coordinator to become the Trust Center when it is operating in a network that is not using one. It will send out an updated Network Key to all devices that will indicate a transition of the network to now use a Trust Center. The Trust Center should also switch all devices to using the new network key with a call to <a class="el" href="group__trust__center.html#gad7df687b4305b8c264e13c6e48cadd69" title="Broadcasts a switch key message to tell all nodes to change to the sequence number of the previously ...">emberBroadcastNetworkKeySwitch()</a>. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newNetworkKey</td><td>The key data for the Updated Network Key.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An <a class="el" href="error_8h.html#acff561a945530f3039d6715958418ab8">EmberStatus</a> value that indicates the success or failure of the command. </dd></dl>

</div>
</div>
<a id="gad7df687b4305b8c264e13c6e48cadd69"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gad7df687b4305b8c264e13c6e48cadd69">&#9670;&nbsp;</a></span>emberBroadcastNetworkKeySwitch()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a> emberBroadcastNetworkKeySwitch </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Broadcasts a switch key message to tell all nodes to change to the sequence number of the previously sent Alternate Encryption Key. </p>
<p>This function is only valid for the Trust Center/Coordinator and will also cause the Trust Center/Coordinator to change its Network Key. It is not valid when operating in Distributed Trust Center mode.</p>
<dl class="section return"><dt>Returns</dt><dd>An <a class="el" href="error_8h.html#acff561a945530f3039d6715958418ab8">EmberStatus</a> value that indicates the success or failure of the command. </dd></dl>

</div>
</div>
<a id="ga7965584d8894b1d609b6a688477baac1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7965584d8894b1d609b6a688477baac1">&#9670;&nbsp;</a></span>emberBroadcastNextNetworkKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a> emberBroadcastNextNetworkKey </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEmberKeyData.html">EmberKeyData</a> *&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Broadcasts a new encryption key but does not tell the nodes in the network to start using it. </p>
<p>To broadcast a new key, use <a class="el" href="group__trust__center.html#gad7df687b4305b8c264e13c6e48cadd69" title="Broadcasts a switch key message to tell all nodes to change to the sequence number of the previously ...">emberBroadcastNetworkKeySwitch()</a>, which is only valid for the Trust Center/Coordinator. It is not valid when operating in Distributed Trust Center mode.</p>
<p>It is up to the application to determine how quickly to send the Switch Key after sending the alternate encryption key. The factors to consider are the polling rate of sleepy end devices and the buffer size of their parent nodes. Sending too quickly may cause a sleepy end device to miss the Alternate Encryption Key and only get the Switch Key message, which means it will be unable to change to the new network key.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>A pointer to a 16-byte encryption key (EMBER_ENCRYPTION_KEY_SIZE). A NULL (or all zero key) may be passed in, which will cause the stack to randomly generate a new key.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An <a class="el" href="error_8h.html#acff561a945530f3039d6715958418ab8">EmberStatus</a> value that indicates the success or failure of the command. </dd></dl>

</div>
</div>
<a id="gaf74958c082b2b0324f2ba340c3af70df"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf74958c082b2b0324f2ba340c3af70df">&#9670;&nbsp;</a></span>emberSendRemoveDevice()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a> emberSendRemoveDevice </td>
          <td>(</td>
          <td class="paramtype">EmberNodeId&#160;</td>
          <td class="paramname"><em>destShort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EmberEUI64&#160;</td>
          <td class="paramname"><em>destLong</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EmberEUI64&#160;</td>
          <td class="paramname"><em>deviceToRemoveLong</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends an APS remove device command to the destination. If the destination is an end device, this must be sent to the parent of the end device. In that case, the deviceToRemoveLong and the destLong will be different values. Otherwise, if a router is being asked to leave, those parameters will be the same. This command will be APS encrypted with the destination device's link key, which means a link key must be present. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">destShort</td><td>The short node ID of the destination of the command.</td></tr>
    <tr><td class="paramname">destLong</td><td>The EUI64 of the destination of the command.</td></tr>
    <tr><td class="paramname">deviceToRemoveLong</td><td>The EUI64 of the target device being asked to leave.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An <a class="el" href="error_8h.html#acff561a945530f3039d6715958418ab8">EmberStatus</a> value indicating success or failure of the operation. </dd></dl>

</div>
</div>
<a id="ga996c5ff3bd65e9e4bc5e25ae3a9478db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga996c5ff3bd65e9e4bc5e25ae3a9478db">&#9670;&nbsp;</a></span>emberSendTrustCenterLinkKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a> emberSendTrustCenterLinkKey </td>
          <td>(</td>
          <td class="paramtype">EmberNodeId&#160;</td>
          <td class="paramname"><em>destinationNodeId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EmberEUI64&#160;</td>
          <td class="paramname"><em>destinationEui64</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the trust center link key to a node. </p>
<p>This function sends an APS TransportKey command containing the current trust center link key. The node to which the command is sent is specified via the short and long address arguments.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">destinationNodeId</td><td>The short address of the node to which this command will be sent. </td></tr>
    <tr><td class="paramname">destinationEui64</td><td>The long address of the node to which this command will be sent. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An <a class="el" href="error_8h.html#acff561a945530f3039d6715958418ab8">EmberStatus</a> value indicating success or failure of the operation. </dd></dl>

</div>
</div>
<a id="gabc629fb2a3166dc1a75efec28c205f58"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabc629fb2a3166dc1a75efec28c205f58">&#9670;&nbsp;</a></span>emberSendUnicastNetworkKeyUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a> emberSendUnicastNetworkKeyUpdate </td>
          <td>(</td>
          <td class="paramtype">EmberNodeId&#160;</td>
          <td class="paramname"><em>targetShort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EmberEUI64&#160;</td>
          <td class="paramname"><em>targetLong</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structEmberKeyData.html">EmberKeyData</a> *&#160;</td>
          <td class="paramname"><em>newKey</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends a unicast update of the network key to the target device. The APS command will be encrypted using the device's current APS link key. On success, the bit ::EMBER_KEY_UNICAST_NWK_KEY_UPDATE_SENT will be set in the link key table entry for the device. When a successful call is made to <a class="el" href="group__trust__center.html#gad7df687b4305b8c264e13c6e48cadd69" title="Broadcasts a switch key message to tell all nodes to change to the sequence number of the previously ...">emberBroadcastNetworkKeySwitch()</a>, the bit will be cleared for all entries. </p>
<p>On the first call to this function, the trust center's local copy of the alternate NWK key will be updated with the new value.</p>
<p>Both the short and long address of the device must be known ahead of time and passed in as parameters. It is assumed that the application has already generated the new network key and will pass the same key value on subsequent calls to send the key to different nodes in the network.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">targetStort</td><td>The short node ID of the device to send a NWK key update to.</td></tr>
    <tr><td class="paramname">targetLong</td><td>The EUI64 of the node to send a key update NWK key update to.</td></tr>
    <tr><td class="paramname">nwkKey</td><td>A pointer to the new NWK key value.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An <a class="el" href="error_8h.html#acff561a945530f3039d6715958418ab8">EmberStatus</a> value that indicates the success or failure of the command. </dd></dl>

</div>
</div>
<a id="gaea7b346ab4db5443316930328033285b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea7b346ab4db5443316930328033285b">&#9670;&nbsp;</a></span>emberTrustCenterJoinHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ember__types.html#ga395f1f81009b39817c6ad771c398827b">EmberJoinDecision</a> emberTrustCenterJoinHandler </td>
          <td>(</td>
          <td class="paramtype">EmberNodeId&#160;</td>
          <td class="paramname"><em>newNodeId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EmberEUI64&#160;</td>
          <td class="paramname"><em>newNodeEui64</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__ember__types.html#gae85447b46d5b9eae4ebca3e656646659">EmberDeviceUpdate</a>&#160;</td>
          <td class="paramname"><em>status</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EmberNodeId&#160;</td>
          <td class="paramname"><em>parentOfNewNode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Callback to allow the application running on the Trust Center (which is the coordinator for ZigBee networks) to control which nodes are allowed to join the network. If the node is allowed to join, the trust center must decide whether to send the Network Key encrypted or unencrypted to the joining node. </p>
<p>A default handler is provided and its behavior is as follows. A status of ::EMBER_DEVICE_SECURED_REJOIN means that the device has the Network Key, no action is required from the Trust Center. A status of <a class="el" href="group__ember__types.html#ggae85447b46d5b9eae4ebca3e656646659a646fd3a701e0340517a15149cc3ecc14">EMBER_DEVICE_LEFT</a> also requires no action. In both cases, <a class="el" href="group__ember__types.html#gga395f1f81009b39817c6ad771c398827ba5609e58bbdccd6671523cc088d817297">EMBER_NO_ACTION</a> is returned.</p>
<p>When operating in a network with a Trust Center and there is a Global Link Key configured, <a class="el" href="group__ember__types.html#gga395f1f81009b39817c6ad771c398827ba4eb7cb3fa59548cf61a8ddb1c047a469">EMBER_USE_PRECONFIGURED_KEY</a> will be returned, which means the Trust Center is using a preconfigured Link Key. The Network Key will be sent to the joining node encrypted with the Link Key. If a Link Key has not been set on the Trust Center, <a class="el" href="group__ember__types.html#gga395f1f81009b39817c6ad771c398827ba43dd4d7509428d1a702eff4634345dd2">EMBER_DENY_JOIN</a> is returned.</p>
<p>The ::EMBER_ASK_TRUST_CENTER decision has been deprecated. This function will not be called for a router or end device when operating in a Network With a Trust Center.</p>
<p>If the device is a router in a network that is operating in a Distributed Trust Center Security mode, the handler will be called by the stack.</p>
<p>The default handler in a Distributed Trust Center Security mode network is as follows: If the router received an encrypted Network Key when it joined, a preconfigured Link key will be used to send the Network Key Encrypted to the joining device (<a class="el" href="group__ember__types.html#gga395f1f81009b39817c6ad771c398827ba4eb7cb3fa59548cf61a8ddb1c047a469">EMBER_USE_PRECONFIGURED_KEY</a>). If the router received the Network Key in the clear, it will also send the key in the clear to the joining node (<a class="el" href="group__ember__types.html#gga395f1f81009b39817c6ad771c398827ba01ab24f01abaa873a8f1518eebcccc07">EMBER_SEND_KEY_IN_THE_CLEAR</a>).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">newNodeId</td><td>The node ID of the device wishing to join. </td></tr>
    <tr><td class="paramname">newNodeEui64</td><td>The EUI64 of the device wishing to join. </td></tr>
    <tr><td class="paramname">status</td><td>The EmberUpdateDeviceStatus indicating whether the device is joining/rejoining or leaving. </td></tr>
    <tr><td class="paramname">parentOfNewNode</td><td>The node ID of the parent of the device wishing to join.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><a class="el" href="group__ember__types.html#gga395f1f81009b39817c6ad771c398827ba4eb7cb3fa59548cf61a8ddb1c047a469">EMBER_USE_PRECONFIGURED_KEY</a> to allow the node to join without sending it the key. <a class="el" href="group__ember__types.html#gga395f1f81009b39817c6ad771c398827ba01ab24f01abaa873a8f1518eebcccc07">EMBER_SEND_KEY_IN_THE_CLEAR</a> to allow the node to join and send it the key. <a class="el" href="group__ember__types.html#gga395f1f81009b39817c6ad771c398827ba43dd4d7509428d1a702eff4634345dd2">EMBER_DENY_JOIN</a> to reject the join attempt. The value should not be returned if the local node is itself the trust center. </dd></dl>

</div>
</div>
<a id="gaa54115c05ccb10d09b11c782fe3b7e3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa54115c05ccb10d09b11c782fe3b7e3b">&#9670;&nbsp;</a></span>emberUnicastCurrentNetworkKey()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a> emberUnicastCurrentNetworkKey </td>
          <td>(</td>
          <td class="paramtype">EmberNodeId&#160;</td>
          <td class="paramname"><em>targetShort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EmberEUI64&#160;</td>
          <td class="paramname"><em>targetLong</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">EmberNodeId&#160;</td>
          <td class="paramname"><em>parentShortId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sends the network key to the target device. The APS command will be encrypted using the device's current APS link key. The call would fail if there is no link key avaialble. </p>
<p>Both the short and long address of the device must be known ahead of time and passed in as parameters. It is assumed that the application has already generated the new network key and will pass the same key value on subsequent calls to send the key to different nodes in the network.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">targetStort</td><td>The short node ID of the device to send a NWK key to.</td></tr>
    <tr><td class="paramname">targetLong</td><td>The EUI64 of the node to send a NWK key to.</td></tr>
    <tr><td class="paramname">parentShortId</td><td>The short node ID of the parent of the device to send a NWK key to.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>An <a class="el" href="error_8h.html#acff561a945530f3039d6715958418ab8">EmberStatus</a> value that indicates the success or failure of the command. </dd></dl>

</div>
</div>
<a id="ga8a2a759ad06a09e71dabd934042adc18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8a2a759ad06a09e71dabd934042adc18">&#9670;&nbsp;</a></span>emGetNetworkIndexForForkedGlobal()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t emGetNetworkIndexForForkedGlobal </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This variable controls the policy that the Trust Center uses for determining whether to allow or deny requests for Trust Center link keys. </p>
<p>The following is a good set of guidelines for TC Link key requests:</p><ul>
<li>If preconfigured TC link keys are set up on devices, requests for the TC key should never be allowed (<a class="el" href="group__ember__types.html#gga88c8cad59611e0760e7480c6e928968dae2681bbac2804c6021971a4cb24464c3">EMBER_DENY_TC_LINK_KEY_REQUESTS</a>).</li>
<li>If devices request link keys during joining (i.e., join in the clear and set <a class="el" href="group__ember__types.html#gga0f532d16cb984d8d532a121b0c09fbe1a6b1076cd70605355f14da30e6bfbb6dd">EMBER_GET_LINK_KEY_WHEN_JOINING</a>) then it is advisable to allow requesting keys from the TC for a short period of time (e.g., the same amount of time "permit joining" is turned on). Afterwards, requests for the TC link key should be denied. </li>
</ul>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ga03ab067cf8491b0918df78b08524ce50"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga03ab067cf8491b0918df78b08524ce50">&#9670;&nbsp;</a></span>emberAppLinkKeyRequestPolicies</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ember__types.html#ga105f881da2014d4fc25ab26745e83247">EmberAppLinkKeyRequestPolicy</a> emberAppLinkKeyRequestPolicies[]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This variable controls the policy that the Trust Center uses for determining whether to allow or deny requests for application link keys between device pairs. When a request is received and the policy is <a class="el" href="group__ember__types.html#gga88c8cad59611e0760e7480c6e928968dab2826b2bd8c4839687b91e7be2f37c28">EMBER_ALLOW_TC_LINK_KEY_REQUEST_AND_SEND_CURRENT_KEY</a>, the TC will generate a random key and send a copy to both devices encrypted with their individual link keys. </p>
<p>Generally, application link key requests may always be allowed. </p>

</div>
</div>
<a id="ga45cf16ca62d57b62791cd57cf9a179e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga45cf16ca62d57b62791cd57cf9a179e8">&#9670;&nbsp;</a></span>emberTrustCenterLinkKeyRequestPolicies</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__ember__types.html#ga88c8cad59611e0760e7480c6e928968d">EmberTcLinkKeyRequestPolicy</a> emberTrustCenterLinkKeyRequestPolicies[]</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Sep 10 2020 11:32:14 for EmberZNet API Reference: For the EM35x SoC Platform by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
