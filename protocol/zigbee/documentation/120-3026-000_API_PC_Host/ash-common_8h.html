<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EmberZNet API Reference: For the PC Host platform: ash-common.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EmberZNet API Reference: For the PC Host platform
   &#160;<span id="projectnumber">EmberZNet 6.8.1.0</span>
   </div>
   <div id="projectbrief">For the EFR32 and EM3xx Platforms</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('ash-common_8h.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">ash-common.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Header for ASH common functions.  
<a href="#details">More...</a></p>

<p><a href="ash-common_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gac77c7e1725f5e88a7918b9f7a1201df8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#gac77c7e1725f5e88a7918b9f7a1201df8">ashStopAckTimer</a>(void)&#160;&#160;&#160;do { <a class="el" href="group__ash.html#ga2b600c5e9e27ae113baaf5263b912d01">ashAckTimer</a> = 0; } while (false)</td></tr>
<tr class="memdesc:gac77c7e1725f5e88a7918b9f7a1201df8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops and clears ashAckTimer.  <a href="group__ash.html#gac77c7e1725f5e88a7918b9f7a1201df8">More...</a><br /></td></tr>
<tr class="separator:gac77c7e1725f5e88a7918b9f7a1201df8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaddf03c2539fd08d2b1be401bd69121ea"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#gaddf03c2539fd08d2b1be401bd69121ea">ashAckTimerIsRunning</a>()&#160;&#160;&#160;(<a class="el" href="group__ash.html#ga2b600c5e9e27ae113baaf5263b912d01">ashAckTimer</a> != 0)</td></tr>
<tr class="memdesc:gaddf03c2539fd08d2b1be401bd69121ea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether or not ashAckTimer is currently running. The timer may be running even if expired.  <a href="group__ash.html#gaddf03c2539fd08d2b1be401bd69121ea">More...</a><br /></td></tr>
<tr class="separator:gaddf03c2539fd08d2b1be401bd69121ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga197677a3180c521ab988ab7a130a916c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga197677a3180c521ab988ab7a130a916c">ashAckTimerIsNotRunning</a>()&#160;&#160;&#160;(<a class="el" href="group__ash.html#ga2b600c5e9e27ae113baaf5263b912d01">ashAckTimer</a> == 0)</td></tr>
<tr class="memdesc:ga197677a3180c521ab988ab7a130a916c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether or not ashAckTimer is currently running. The timer may be running even if expired.  <a href="group__ash.html#ga197677a3180c521ab988ab7a130a916c">More...</a><br /></td></tr>
<tr class="separator:ga197677a3180c521ab988ab7a130a916c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1d6e6532ea5d5e15d00f784739909bc7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga1d6e6532ea5d5e15d00f784739909bc7">ashSetAckPeriod</a>(msec)&#160;&#160;&#160;do { <a class="el" href="group__ash.html#ga6ecbf08a070b15867a584cb0fdabbc0a">ashAckPeriod</a> = msec; <a class="el" href="group__ash.html#ga2b600c5e9e27ae113baaf5263b912d01">ashAckTimer</a> = 0; } while (false)</td></tr>
<tr class="memdesc:ga1d6e6532ea5d5e15d00f784739909bc7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the acknowledgement timer period (in msec) and stops the timer.  <a href="group__ash.html#ga1d6e6532ea5d5e15d00f784739909bc7">More...</a><br /></td></tr>
<tr class="separator:ga1d6e6532ea5d5e15d00f784739909bc7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0ff23a54555245093a4e3c442f1e7a4b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga0ff23a54555245093a4e3c442f1e7a4b">ashGetAckPeriod</a>()&#160;&#160;&#160;(<a class="el" href="group__ash.html#ga6ecbf08a070b15867a584cb0fdabbc0a">ashAckPeriod</a>)</td></tr>
<tr class="memdesc:ga0ff23a54555245093a4e3c442f1e7a4b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the acknowledgement timer period (in msec).  <a href="group__ash.html#ga0ff23a54555245093a4e3c442f1e7a4b">More...</a><br /></td></tr>
<tr class="separator:ga0ff23a54555245093a4e3c442f1e7a4b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga204144717f2c2ac15d607aaf4288c4bf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga204144717f2c2ac15d607aaf4288c4bf">ashSetAndStartAckTimer</a>(msec)&#160;&#160;&#160;do { <a class="el" href="group__ash.html#ga1d6e6532ea5d5e15d00f784739909bc7">ashSetAckPeriod</a>(msec); <a class="el" href="group__ash.html#ga147d65defc87a85e45339a1abc797f00">ashStartAckTimer</a>(); }  while (false)</td></tr>
<tr class="memdesc:ga204144717f2c2ac15d607aaf4288c4bf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets the acknowledgement timer period (in msec), and starts the timer running.  <a href="group__ash.html#ga204144717f2c2ac15d607aaf4288c4bf">More...</a><br /></td></tr>
<tr class="separator:ga204144717f2c2ac15d607aaf4288c4bf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8233c444fe24216899e7e7888c1534d2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga8233c444fe24216899e7e7888c1534d2">ASH_NR_TIMER_BIT</a>&#160;&#160;&#160;4</td></tr>
<tr class="separator:ga8233c444fe24216899e7e7888c1534d2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf71d90097a4ddb4c22ba26177b2e0199"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#gaf71d90097a4ddb4c22ba26177b2e0199">ashStopNrTimer</a>()&#160;&#160;&#160;do { <a class="el" href="group__ash.html#ga8cae24e3f679790b8b215a7397039506">ashNrTimer</a> = 0; } while (false)</td></tr>
<tr class="memdesc:gaf71d90097a4ddb4c22ba26177b2e0199"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops the Not Ready timer.  <a href="group__ash.html#gaf71d90097a4ddb4c22ba26177b2e0199">More...</a><br /></td></tr>
<tr class="separator:gaf71d90097a4ddb4c22ba26177b2e0199"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gafab75ffab06d84e964b54515d4d818c6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#gafab75ffab06d84e964b54515d4d818c6">ashNrTimerIsNotRunning</a>()&#160;&#160;&#160;(<a class="el" href="group__ash.html#ga2b600c5e9e27ae113baaf5263b912d01">ashAckTimer</a> == 0)</td></tr>
<tr class="memdesc:gafab75ffab06d84e964b54515d4d818c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether or not ashNrTimer is currently running.  <a href="group__ash.html#gafab75ffab06d84e964b54515d4d818c6">More...</a><br /></td></tr>
<tr class="separator:gafab75ffab06d84e964b54515d4d818c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga10c3ad346ae283f5d88d57412e16a0fb"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga10c3ad346ae283f5d88d57412e16a0fb">ashEncodeByte</a> (uint8_t len, uint8_t byte, uint8_t *offset)</td></tr>
<tr class="memdesc:ga10c3ad346ae283f5d88d57412e16a0fb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Builds an ASH frame. Byte stuffs the control and data fields as required, computes and appends the CRC and adds the ending flag byte. Called with the next byte to encode, this function may return several output bytes before it's ready for the next byte.  <a href="group__ash.html#ga10c3ad346ae283f5d88d57412e16a0fb">More...</a><br /></td></tr>
<tr class="separator:ga10c3ad346ae283f5d88d57412e16a0fb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7b584e82bb580dbf398fdcc009ec9794"><td class="memItemLeft" align="right" valign="top">EzspStatus&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga7b584e82bb580dbf398fdcc009ec9794">ashDecodeByte</a> (uint8_t byte, uint8_t *out, uint8_t *outLen)</td></tr>
<tr class="memdesc:ga7b584e82bb580dbf398fdcc009ec9794"><td class="mdescLeft">&#160;</td><td class="mdescRight">Decodes and validates an ASH frame. Data is passed to it one byte at a time. Decodes byte stuffing, checks crc, finds the end flag and (if enabled) terminates the frame early on CAN or SUB bytes. The number of bytes output will not exceed the max valid frame length, which does not include the flag or the crc.  <a href="group__ash.html#ga7b584e82bb580dbf398fdcc009ec9794">More...</a><br /></td></tr>
<tr class="separator:ga7b584e82bb580dbf398fdcc009ec9794"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59b4358eb69d6bea288c7865093682e1"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga59b4358eb69d6bea288c7865093682e1">ashRandomizeArray</a> (uint8_t seed, uint8_t *buf, uint8_t len)</td></tr>
<tr class="memdesc:ga59b4358eb69d6bea288c7865093682e1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Randomizes array contents by XORing with an 8-bit pseudo random sequence. This reduces the likelihood that byte-stuffing will greatly increase the size of the payload. (This could happen if a DATA frame contained repeated instances of the same reserved byte value.)  <a href="group__ash.html#ga59b4358eb69d6bea288c7865093682e1">More...</a><br /></td></tr>
<tr class="separator:ga59b4358eb69d6bea288c7865093682e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga147d65defc87a85e45339a1abc797f00"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga147d65defc87a85e45339a1abc797f00">ashStartAckTimer</a> (void)</td></tr>
<tr class="memdesc:ga147d65defc87a85e45339a1abc797f00"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets ashAckTimer to the specified period and starts it running.  <a href="group__ash.html#ga147d65defc87a85e45339a1abc797f00">More...</a><br /></td></tr>
<tr class="separator:ga147d65defc87a85e45339a1abc797f00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadb412994f0cbaa9fe4b88ef286a213a8"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#gadb412994f0cbaa9fe4b88ef286a213a8">ashAckTimerHasExpired</a> (void)</td></tr>
<tr class="memdesc:gadb412994f0cbaa9fe4b88ef286a213a8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Indicates whether or not ashAckTimer has expired. If the timer is stopped then it is not expired.  <a href="group__ash.html#gadb412994f0cbaa9fe4b88ef286a213a8">More...</a><br /></td></tr>
<tr class="separator:gadb412994f0cbaa9fe4b88ef286a213a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1c530d5333700b457d976faa2a36370f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga1c530d5333700b457d976faa2a36370f">ashAdjustAckPeriod</a> (bool expired)</td></tr>
<tr class="memdesc:ga1c530d5333700b457d976faa2a36370f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Adapts the acknowledgement timer period to the observed ACK delay. If the timer is not running, it does nothing. If the timer has expired, the timeourt period is doubled. If the timer has not expired, the elapsed time is fed into simple IIR filter: T[n+1] = (7*T[n] + elapsedTime) / 8 The timeout period, ashAckPeriod, is limited such that: ASH_xxx_TIME_DATA_MIN &lt;= ashAckPeriod &lt;= ASH_xxx_TIME_DATA_MAX, where xxx is either HOST or NCP.  <a href="group__ash.html#ga1c530d5333700b457d976faa2a36370f">More...</a><br /></td></tr>
<tr class="separator:ga1c530d5333700b457d976faa2a36370f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1404542c9c852c1d4bd9f572c5dae878"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga1404542c9c852c1d4bd9f572c5dae878">ashStartNrTimer</a> (void)</td></tr>
<tr class="memdesc:ga1404542c9c852c1d4bd9f572c5dae878"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the Not Ready timer.  <a href="group__ash.html#ga1404542c9c852c1d4bd9f572c5dae878">More...</a><br /></td></tr>
<tr class="separator:ga1404542c9c852c1d4bd9f572c5dae878"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab59c8c60c85e8392d59b4f4393e29cbc"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#gab59c8c60c85e8392d59b4f4393e29cbc">ashNrTimerHasExpired</a> (void)</td></tr>
<tr class="memdesc:gab59c8c60c85e8392d59b4f4393e29cbc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tests whether the Not Ready timer has expired or has stopped. If expired, it is stopped.  <a href="group__ash.html#gab59c8c60c85e8392d59b4f4393e29cbc">More...</a><br /></td></tr>
<tr class="separator:gab59c8c60c85e8392d59b4f4393e29cbc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ga87ec669da2422551edc76a052ab9c8b0"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga87ec669da2422551edc76a052ab9c8b0">ashDecodeInProgress</a></td></tr>
<tr class="separator:ga87ec669da2422551edc76a052ab9c8b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2b600c5e9e27ae113baaf5263b912d01"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga2b600c5e9e27ae113baaf5263b912d01">ashAckTimer</a></td></tr>
<tr class="separator:ga2b600c5e9e27ae113baaf5263b912d01"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6ecbf08a070b15867a584cb0fdabbc0a"><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga6ecbf08a070b15867a584cb0fdabbc0a">ashAckPeriod</a></td></tr>
<tr class="separator:ga6ecbf08a070b15867a584cb0fdabbc0a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8cae24e3f679790b8b215a7397039506"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__ash.html#ga8cae24e3f679790b8b215a7397039506">ashNrTimer</a></td></tr>
<tr class="separator:ga8cae24e3f679790b8b215a7397039506"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Header for ASH common functions. </p>
<p>See <a class="el" href="group__ash.html">Asynchronous Serial Host (ASH) Framework</a> for documentation.</p>
<h1>License</h1>
<p><b>Copyright 2018 Silicon Laboratories Inc. www.silabs.com</b></p>
<p>The licensor of this software is Silicon Laboratories Inc. Your use of this software is governed by the terms of Silicon Labs Master Software License Agreement (MSLA) available at www.silabs.com/about-us/legal/master-software-license-agreement. This software is distributed to you in Source Code format and is governed by the sections of the MSLA applicable to Source Code. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_c5a52a81292cf9a5167198f4f346d6d9.html">platform</a></li><li class="navelem"><a class="el" href="dir_61e71790190f2ed2d1b76a225b58bfa2.html">base</a></li><li class="navelem"><a class="el" href="dir_509a7db743e505dc0f12c2880d643fcc.html">hal</a></li><li class="navelem"><a class="el" href="dir_4372a68bbbee47581217b9b7b89958a5.html">micro</a></li><li class="navelem"><a class="el" href="dir_9e328d1a44cac8a904161d286c17221b.html">generic</a></li><li class="navelem"><a class="el" href="ash-common_8h.html">ash-common.h</a></li>
    <li class="footer">Generated on Thu Sep 10 2020 11:33:59 for EmberZNet API Reference: For the PC Host platform by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
