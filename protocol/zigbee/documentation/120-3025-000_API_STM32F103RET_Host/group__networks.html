<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EmberZNet API Reference: For the STM32F103RET Host platform: Networks</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="customdoxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EmberZNet API Reference: For the STM32F103RET Host platform
   &#160;<span id="projectnumber">EmberZNet 6.8.1.0</span>
   </div>
   <div id="projectbrief">For the EFR32 and EM3xx Platforms</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__networks.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Networks</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gadb41735016ec7137c5b9d63093512621"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#gadb41735016ec7137c5b9d63093512621">NETWORK_STORAGE_SIZE</a>&#160;&#160;&#160;16</td></tr>
<tr class="memdesc:gadb41735016ec7137c5b9d63093512621"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of bytes required to store relevant info for a saved network.  <a href="#gadb41735016ec7137c5b9d63093512621">More...</a><br /></td></tr>
<tr class="separator:gadb41735016ec7137c5b9d63093512621"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab46636621542ec8c636e4d95c422e4a5"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#gab46636621542ec8c636e4d95c422e4a5">NETWORK_STORAGE_SIZE_SHIFT</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:gab46636621542ec8c636e4d95c422e4a5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log_base2 of <a class="el" href="group__networks.html#gadb41735016ec7137c5b9d63093512621" title="Number of bytes required to store relevant info for a saved network. ">NETWORK_STORAGE_SIZE</a>.  <a href="#gab46636621542ec8c636e4d95c422e4a5">More...</a><br /></td></tr>
<tr class="separator:gab46636621542ec8c636e4d95c422e4a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8d79111eca6026f525d494990544263f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#ga8d79111eca6026f525d494990544263f">FORM_AND_JOIN_MAX_NETWORKS</a>&#160;&#160;&#160;15</td></tr>
<tr class="memdesc:ga8d79111eca6026f525d494990544263f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of joinable networks that can be remembered during the scan process.  <a href="#ga8d79111eca6026f525d494990544263f">More...</a><br /></td></tr>
<tr class="separator:ga8d79111eca6026f525d494990544263f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gae2c4bb6f00441f30461203f60f93a176"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#gae2c4bb6f00441f30461203f60f93a176">emberScanForUnusedPanId</a> (uint32_t channelMask, uint8_t duration)</td></tr>
<tr class="memdesc:gae2c4bb6f00441f30461203f60f93a176"><td class="mdescLeft">&#160;</td><td class="mdescRight">Find an unused PAN id.  <a href="#gae2c4bb6f00441f30461203f60f93a176">More...</a><br /></td></tr>
<tr class="separator:gae2c4bb6f00441f30461203f60f93a176"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4eeeaa1118b0ac13e41722a247fcbeac"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#ga4eeeaa1118b0ac13e41722a247fcbeac">emberScanForJoinableNetwork</a> (uint32_t channelMask, uint8_t *extendedPanId)</td></tr>
<tr class="memdesc:ga4eeeaa1118b0ac13e41722a247fcbeac"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finds a joinable network.  <a href="#ga4eeeaa1118b0ac13e41722a247fcbeac">More...</a><br /></td></tr>
<tr class="separator:ga4eeeaa1118b0ac13e41722a247fcbeac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga48c6949bbd1c95b595aa6374513557ae"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#ga48c6949bbd1c95b595aa6374513557ae">emberScanForNextJoinableNetwork</a> (void)</td></tr>
<tr class="memdesc:ga48c6949bbd1c95b595aa6374513557ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">See <a class="el" href="group__networks.html#ga4eeeaa1118b0ac13e41722a247fcbeac" title="Finds a joinable network. ">emberScanForJoinableNetwork()</a>.  <a href="#ga48c6949bbd1c95b595aa6374513557ae">More...</a><br /></td></tr>
<tr class="separator:ga48c6949bbd1c95b595aa6374513557ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0d38e230464be04c239bd97554950382"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#ga0d38e230464be04c239bd97554950382">emberFormAndJoinIsScanning</a> (void)</td></tr>
<tr class="memdesc:ga0d38e230464be04c239bd97554950382"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if and only if the form and join library is in the process of scanning and is therefore expecting scan results to be passed to it from the application.  <a href="#ga0d38e230464be04c239bd97554950382">More...</a><br /></td></tr>
<tr class="separator:ga0d38e230464be04c239bd97554950382"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b907f848e4846310adf23d618a4801a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#ga4b907f848e4846310adf23d618a4801a">emberFormAndJoinCanContinueJoinableNetworkScan</a> (void)</td></tr>
<tr class="memdesc:ga4b907f848e4846310adf23d618a4801a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns true if and only if the application can continue a joinable network scan by calling <a class="el" href="group__networks.html#ga48c6949bbd1c95b595aa6374513557ae" title="See emberScanForJoinableNetwork(). ">emberScanForNextJoinableNetwork()</a>. See <a class="el" href="group__networks.html#ga4eeeaa1118b0ac13e41722a247fcbeac" title="Finds a joinable network. ">emberScanForJoinableNetwork()</a>.  <a href="#ga4b907f848e4846310adf23d618a4801a">More...</a><br /></td></tr>
<tr class="separator:ga4b907f848e4846310adf23d618a4801a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5bb227624604bb2e441738db89db4dde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#ga5bb227624604bb2e441738db89db4dde">emberJoinableNetworkFoundHandler</a> (<a class="el" href="structEmberZigbeeNetwork.html">EmberZigbeeNetwork</a> *networkFound, uint8_t lqi, int8_t rssi)</td></tr>
<tr class="memdesc:ga5bb227624604bb2e441738db89db4dde"><td class="mdescLeft">&#160;</td><td class="mdescRight">A callback the application needs to implement.  <a href="#ga5bb227624604bb2e441738db89db4dde">More...</a><br /></td></tr>
<tr class="separator:ga5bb227624604bb2e441738db89db4dde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga81e2257ef31e6932dfeaaa6fece1abb4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#ga81e2257ef31e6932dfeaaa6fece1abb4">emberScanErrorHandler</a> (<a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a> status)</td></tr>
<tr class="memdesc:ga81e2257ef31e6932dfeaaa6fece1abb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">A callback the application needs to implement.  <a href="#ga81e2257ef31e6932dfeaaa6fece1abb4">More...</a><br /></td></tr>
<tr class="separator:ga81e2257ef31e6932dfeaaa6fece1abb4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae3738645fe79c8b2f524faa2275dc725"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#gae3738645fe79c8b2f524faa2275dc725">emberFormAndJoinScanCompleteHandler</a> (uint8_t channel, <a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a> status)</td></tr>
<tr class="memdesc:gae3738645fe79c8b2f524faa2275dc725"><td class="mdescLeft">&#160;</td><td class="mdescRight">The application must call this function from within its emberScanCompleteHandler() (on the node) or ezspScanCompleteHandler() (on an EZSP host). Default callback implementations are provided in the form-and-join-*-callbacks.c files.  <a href="#gae3738645fe79c8b2f524faa2275dc725">More...</a><br /></td></tr>
<tr class="separator:gae3738645fe79c8b2f524faa2275dc725"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7bb14805b5e3ece1fc91c1676435575a"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#ga7bb14805b5e3ece1fc91c1676435575a">emberFormAndJoinNetworkFoundHandler</a> (<a class="el" href="structEmberZigbeeNetwork.html">EmberZigbeeNetwork</a> *networkFound, uint8_t lqi, int8_t rssi)</td></tr>
<tr class="memdesc:ga7bb14805b5e3ece1fc91c1676435575a"><td class="mdescLeft">&#160;</td><td class="mdescRight">The application must call this function from within its emberNetworkFoundHandler() (on the node) or ezspNetworkFoundHandler() (on an EZSP host). Default callback implementations are provided in the form-and-join-*-callbacks.c files.  <a href="#ga7bb14805b5e3ece1fc91c1676435575a">More...</a><br /></td></tr>
<tr class="separator:ga7bb14805b5e3ece1fc91c1676435575a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadafefe612b1234d6774247a23e49244b"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#gadafefe612b1234d6774247a23e49244b">emberFormAndJoinEnergyScanResultHandler</a> (uint8_t channel, int8_t maxRssiValue)</td></tr>
<tr class="memdesc:gadafefe612b1234d6774247a23e49244b"><td class="mdescLeft">&#160;</td><td class="mdescRight">The application must call this function from within its emberEnergyScanResultHandler() (on the node) or ezspEnergyScanResultHandler() (on an EZSP host). Default callback implementations are provided in the form-and-join-*-callbacks.c files.  <a href="#gadafefe612b1234d6774247a23e49244b">More...</a><br /></td></tr>
<tr class="separator:gadafefe612b1234d6774247a23e49244b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga12ec3879b9c030706f4edcf8e0662356"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#ga12ec3879b9c030706f4edcf8e0662356">emberFormAndJoinUnusedPanIdFoundHandler</a> (EmberPanId panId, uint8_t channel)</td></tr>
<tr class="memdesc:ga12ec3879b9c030706f4edcf8e0662356"><td class="mdescLeft">&#160;</td><td class="mdescRight">The application must call this function from within its emberUnusedPandIdFoundHandler() (on the node) or ezspEnergyScanResultHandler() (on an EZSP host). Default callback implementations are provided in the form-and-join-*-callbacks.c files.  <a href="#ga12ec3879b9c030706f4edcf8e0662356">More...</a><br /></td></tr>
<tr class="separator:ga12ec3879b9c030706f4edcf8e0662356"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga97f80355c6d39caae522c46482e6961e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#ga97f80355c6d39caae522c46482e6961e">emberFormAndJoinTick</a> (void)</td></tr>
<tr class="separator:ga97f80355c6d39caae522c46482e6961e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga00ed937b2d96a4c238ef1691c5007cfa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#ga00ed937b2d96a4c238ef1691c5007cfa">emberFormAndJoinTaskInit</a> (void)</td></tr>
<tr class="memdesc:ga00ed937b2d96a4c238ef1691c5007cfa"><td class="mdescLeft">&#160;</td><td class="mdescRight">When processor idling is desired on the SOC, this must be called to properly initialize the form and join library.  <a href="#ga00ed937b2d96a4c238ef1691c5007cfa">More...</a><br /></td></tr>
<tr class="separator:ga00ed937b2d96a4c238ef1691c5007cfa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2561de9535b9dde233711b8eaaaeef84"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#ga2561de9535b9dde233711b8eaaaeef84">emberFormAndJoinRunTask</a> (void)</td></tr>
<tr class="memdesc:ga2561de9535b9dde233711b8eaaaeef84"><td class="mdescLeft">&#160;</td><td class="mdescRight">When processor idling is desired on the SOC, this should be called regularly instead of <a class="el" href="group__networks.html#ga97f80355c6d39caae522c46482e6961e">emberFormAndJoinTick()</a>  <a href="#ga2561de9535b9dde233711b8eaaaeef84">More...</a><br /></td></tr>
<tr class="separator:ga2561de9535b9dde233711b8eaaaeef84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga325c62fb929bdb79ac16a3e2ea2a7768"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#ga325c62fb929bdb79ac16a3e2ea2a7768">emberFormAndJoinCleanup</a> (<a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a> status)</td></tr>
<tr class="memdesc:ga325c62fb929bdb79ac16a3e2ea2a7768"><td class="mdescLeft">&#160;</td><td class="mdescRight">When form-and-join state is no longer needed, the application can call this routine to cleanup and free resources. On the SOC platforms this will free the allocated message buffer.  <a href="#ga325c62fb929bdb79ac16a3e2ea2a7768">More...</a><br /></td></tr>
<tr class="separator:ga325c62fb929bdb79ac16a3e2ea2a7768"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gaf3f8a852097d6ec543f235ed952c93f9"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__networks.html#gaf3f8a852097d6ec543f235ed952c93f9">emberEnableDualChannelScan</a></td></tr>
<tr class="separator:gaf3f8a852097d6ec543f235ed952c93f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions for finding an existing network to join and for finding an unused PAN id with which to form a network.</p>
<p>Summary of application requirements:</p>
<p>For the SOC:</p><ul>
<li>Define ::EMBER_APPLICATION_HAS_ENERGY_SCAN_RESULT_HANDLER in the configuration header.</li>
<li>Call <a class="el" href="group__networks.html#ga97f80355c6d39caae522c46482e6961e">emberFormAndJoinTick()</a> regularly in the main loop.</li>
<li>Include form-and-join.c and form-and-join-node-adapter.c in the build.</li>
<li>Optionally include form-and-join-node-callbacks.c in the build.</li>
<li>If processor idling is desired: &ndash; Call <a class="el" href="group__networks.html#ga00ed937b2d96a4c238ef1691c5007cfa" title="When processor idling is desired on the SOC, this must be called to properly initialize the form and ...">emberFormAndJoinTaskInit()</a> to initialize the form and join task &ndash; Call <a class="el" href="group__networks.html#ga2561de9535b9dde233711b8eaaaeef84" title="When processor idling is desired on the SOC, this should be called regularly instead of emberFormAndJ...">emberFormAndJoinRunTask()</a> regularly in the main loop instead of <a class="el" href="group__networks.html#ga97f80355c6d39caae522c46482e6961e">emberFormAndJoinTick()</a></li>
</ul>
<p>For an EZSP Host:</p><ul>
<li>Define ::EZSP_APPLICATION_HAS_ENERGY_SCAN_RESULT_HANDLER in the configuration header.</li>
<li>Include form-and-join.c and form-and-join-host-adapter.c in the build.</li>
<li>Optionally include form-and-join-host-callbacks.c in the build.</li>
</ul>
<p>For either platform, the application can omit the form-and-join-*-callback.c file from the build and implement the callbacks itself if necessary. In this case the appropriate form-and-join callback function must be called from within each callback, as is done within the form-and-join-*-callback.c files.</p>
<p>On either platform, FORM_AND_JOIN_MAX_NETWORKS can be explicitly defined to limit (or expand) the number of joinable networks that the library will save for consideration during the scan process.</p>
<p>The library is able to resume scanning for joinable networks from where it left off, via a call to <a class="el" href="group__networks.html#ga48c6949bbd1c95b595aa6374513557ae" title="See emberScanForJoinableNetwork(). ">emberScanForNextJoinableNetwork()</a>. Thus if the first joinable network found is not the correct one, the application can continue scanning without starting from the beginning and without finding the same network that it has already rejected. The library can also be used on the host processor. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga8d79111eca6026f525d494990544263f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga8d79111eca6026f525d494990544263f">&#9670;&nbsp;</a></span>FORM_AND_JOIN_MAX_NETWORKS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FORM_AND_JOIN_MAX_NETWORKS&#160;&#160;&#160;15</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of joinable networks that can be remembered during the scan process. </p>
<p>Note for SoC Platforms: This is currently limited to a maximum of 15 due to the size of each network entry (16 bytes) and the EmberMessageBuffer API's requirement that total buffer storage length be kept to an 8-bit quantity (less than 256).</p>
<p>Note for EZSP Host Platforms: In the host implementation of this library, the storage size for the detected networks buffer is controlled by <a class="el" href="group__configuration.html#ga3b89338e17b9a81228fd968836f64380" title="The size of the buffer for caching data during scans. ">EZSP_HOST_FORM_AND_JOIN_BUFFER_SIZE</a>, so that limits the highest value that the host can set for FORM_AND_JOIN_MAX_NETWORKS. </p>

</div>
</div>
<a id="gadb41735016ec7137c5b9d63093512621"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadb41735016ec7137c5b9d63093512621">&#9670;&nbsp;</a></span>NETWORK_STORAGE_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NETWORK_STORAGE_SIZE&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Number of bytes required to store relevant info for a saved network. </p>
<p>This constant represents the minimum number of bytes required to store all members of the NetworkInfo struct used in the adapter code. Its value should not be changed unless the underlying adapter code is updated accordingly. Note that this constant's value may be different than sizeof(NetworkInfo) because some compilers pad the structs to align on word boundaries. Thus, the adapter code stores/retrieves these pieces of data individually (to be platform-agnostic) rather than as a struct.</p>
<p>For efficiency's sake, this number should be kept to a power of 2 and not and not exceed 32 (PACKET_BUFFER_SIZE). </p>

</div>
</div>
<a id="gab46636621542ec8c636e4d95c422e4a5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gab46636621542ec8c636e4d95c422e4a5">&#9670;&nbsp;</a></span>NETWORK_STORAGE_SIZE_SHIFT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NETWORK_STORAGE_SIZE_SHIFT&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Log_base2 of <a class="el" href="group__networks.html#gadb41735016ec7137c5b9d63093512621" title="Number of bytes required to store relevant info for a saved network. ">NETWORK_STORAGE_SIZE</a>. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga4b907f848e4846310adf23d618a4801a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4b907f848e4846310adf23d618a4801a">&#9670;&nbsp;</a></span>emberFormAndJoinCanContinueJoinableNetworkScan()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool emberFormAndJoinCanContinueJoinableNetworkScan </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if and only if the application can continue a joinable network scan by calling <a class="el" href="group__networks.html#ga48c6949bbd1c95b595aa6374513557ae" title="See emberScanForJoinableNetwork(). ">emberScanForNextJoinableNetwork()</a>. See <a class="el" href="group__networks.html#ga4eeeaa1118b0ac13e41722a247fcbeac" title="Finds a joinable network. ">emberScanForJoinableNetwork()</a>. </p>

</div>
</div>
<a id="ga325c62fb929bdb79ac16a3e2ea2a7768"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga325c62fb929bdb79ac16a3e2ea2a7768">&#9670;&nbsp;</a></span>emberFormAndJoinCleanup()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void emberFormAndJoinCleanup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a>&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>When form-and-join state is no longer needed, the application can call this routine to cleanup and free resources. On the SOC platforms this will free the allocated message buffer. </p>

</div>
</div>
<a id="gadafefe612b1234d6774247a23e49244b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gadafefe612b1234d6774247a23e49244b">&#9670;&nbsp;</a></span>emberFormAndJoinEnergyScanResultHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool emberFormAndJoinEnergyScanResultHandler </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>maxRssiValue</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The application must call this function from within its emberEnergyScanResultHandler() (on the node) or ezspEnergyScanResultHandler() (on an EZSP host). Default callback implementations are provided in the form-and-join-*-callbacks.c files. </p>
<dl class="section return"><dt>Returns</dt><dd>true iff the library made use of the call. </dd></dl>

</div>
</div>
<a id="ga0d38e230464be04c239bd97554950382"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0d38e230464be04c239bd97554950382">&#9670;&nbsp;</a></span>emberFormAndJoinIsScanning()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool emberFormAndJoinIsScanning </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns true if and only if the form and join library is in the process of scanning and is therefore expecting scan results to be passed to it from the application. </p>

</div>
</div>
<a id="ga7bb14805b5e3ece1fc91c1676435575a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga7bb14805b5e3ece1fc91c1676435575a">&#9670;&nbsp;</a></span>emberFormAndJoinNetworkFoundHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool emberFormAndJoinNetworkFoundHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEmberZigbeeNetwork.html">EmberZigbeeNetwork</a> *&#160;</td>
          <td class="paramname"><em>networkFound</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>lqi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>rssi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The application must call this function from within its emberNetworkFoundHandler() (on the node) or ezspNetworkFoundHandler() (on an EZSP host). Default callback implementations are provided in the form-and-join-*-callbacks.c files. </p>
<dl class="section return"><dt>Returns</dt><dd>true iff the library made use of the call. </dd></dl>

</div>
</div>
<a id="ga2561de9535b9dde233711b8eaaaeef84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2561de9535b9dde233711b8eaaaeef84">&#9670;&nbsp;</a></span>emberFormAndJoinRunTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void emberFormAndJoinRunTask </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>When processor idling is desired on the SOC, this should be called regularly instead of <a class="el" href="group__networks.html#ga97f80355c6d39caae522c46482e6961e">emberFormAndJoinTick()</a> </p>

</div>
</div>
<a id="gae3738645fe79c8b2f524faa2275dc725"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae3738645fe79c8b2f524faa2275dc725">&#9670;&nbsp;</a></span>emberFormAndJoinScanCompleteHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool emberFormAndJoinScanCompleteHandler </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a>&#160;</td>
          <td class="paramname"><em>status</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The application must call this function from within its emberScanCompleteHandler() (on the node) or ezspScanCompleteHandler() (on an EZSP host). Default callback implementations are provided in the form-and-join-*-callbacks.c files. </p>
<dl class="section return"><dt>Returns</dt><dd>true iff the library made use of the call. </dd></dl>

</div>
</div>
<a id="ga00ed937b2d96a4c238ef1691c5007cfa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga00ed937b2d96a4c238ef1691c5007cfa">&#9670;&nbsp;</a></span>emberFormAndJoinTaskInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void emberFormAndJoinTaskInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>When processor idling is desired on the SOC, this must be called to properly initialize the form and join library. </p>

</div>
</div>
<a id="ga97f80355c6d39caae522c46482e6961e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga97f80355c6d39caae522c46482e6961e">&#9670;&nbsp;</a></span>emberFormAndJoinTick()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void emberFormAndJoinTick </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Used by the form and join code on the node to time out a joinable scan after 30 seconds of inactivity. The application must call <a class="el" href="group__networks.html#ga97f80355c6d39caae522c46482e6961e">emberFormAndJoinTick()</a> regularly. This function does not exist for the EZSP host library. </p>

</div>
</div>
<a id="ga12ec3879b9c030706f4edcf8e0662356"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga12ec3879b9c030706f4edcf8e0662356">&#9670;&nbsp;</a></span>emberFormAndJoinUnusedPanIdFoundHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool emberFormAndJoinUnusedPanIdFoundHandler </td>
          <td>(</td>
          <td class="paramtype">EmberPanId&#160;</td>
          <td class="paramname"><em>panId</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>The application must call this function from within its emberUnusedPandIdFoundHandler() (on the node) or ezspEnergyScanResultHandler() (on an EZSP host). Default callback implementations are provided in the form-and-join-*-callbacks.c files. </p>

</div>
</div>
<a id="ga5bb227624604bb2e441738db89db4dde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga5bb227624604bb2e441738db89db4dde">&#9670;&nbsp;</a></span>emberJoinableNetworkFoundHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void emberJoinableNetworkFoundHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structEmberZigbeeNetwork.html">EmberZigbeeNetwork</a> *&#160;</td>
          <td class="paramname"><em>networkFound</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>lqi</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int8_t&#160;</td>
          <td class="paramname"><em>rssi</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A callback the application needs to implement. </p>
<p>Notifies the application of the network found after a call to <a class="el" href="group__networks.html#ga4eeeaa1118b0ac13e41722a247fcbeac" title="Finds a joinable network. ">emberScanForJoinableNetwork()</a> or <a class="el" href="group__networks.html#ga48c6949bbd1c95b595aa6374513557ae" title="See emberScanForJoinableNetwork(). ">emberScanForNextJoinableNetwork()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">networkFound</td><td></td></tr>
    <tr><td class="paramname">lqi</td><td>The lqi value of the received beacon. </td></tr>
    <tr><td class="paramname">rssi</td><td>The rssi value of the received beacon. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga81e2257ef31e6932dfeaaa6fece1abb4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga81e2257ef31e6932dfeaaa6fece1abb4">&#9670;&nbsp;</a></span>emberScanErrorHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void emberScanErrorHandler </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a>&#160;</td>
          <td class="paramname"><em>status</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>A callback the application needs to implement. </p>
<p>If an error occurs while scanning, this function is called and the scan effort is aborted.</p>
<p>Possible return status values are: </p><ul>
<li>
EMBER_INVALID_CALL: if <a class="el" href="group__networks.html#ga48c6949bbd1c95b595aa6374513557ae" title="See emberScanForJoinableNetwork(). ">emberScanForNextJoinableNetwork()</a> is called more than 30 seconds after a previous call to <a class="el" href="group__networks.html#ga4eeeaa1118b0ac13e41722a247fcbeac" title="Finds a joinable network. ">emberScanForJoinableNetwork()</a> or <a class="el" href="group__networks.html#ga48c6949bbd1c95b595aa6374513557ae" title="See emberScanForJoinableNetwork(). ">emberScanForNextJoinableNetwork()</a>. </li>
<li>
EMBER_NO_BUFFERS: if there is not enough memory to start a scan. </li>
<li>
EMBER_NO_BEACONS: if no joinable beacons are found. </li>
<li>
EMBER_MAC_SCANNING: if a scan is already in progress. </li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">status</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4eeeaa1118b0ac13e41722a247fcbeac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4eeeaa1118b0ac13e41722a247fcbeac">&#9670;&nbsp;</a></span>emberScanForJoinableNetwork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a> emberScanForJoinableNetwork </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>channelMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>extendedPanId</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finds a joinable network. </p>
<p>Performs an active scan on the specified channels looking for networks that:</p><ol type="1">
<li>currently permit joining,</li>
<li>match the stack profile of the application,</li>
<li>match the extended PAN id argument if it is not NULL.</li>
</ol>
<p>Upon finding a matching network, the application is notified via the <a class="el" href="group__networks.html#ga5bb227624604bb2e441738db89db4dde" title="A callback the application needs to implement. ">emberJoinableNetworkFoundHandler()</a> callback, and scanning stops. If an error occurs during the scanning process, the application is informed via the <a class="el" href="group__networks.html#ga81e2257ef31e6932dfeaaa6fece1abb4" title="A callback the application needs to implement. ">emberScanErrorHandler()</a>, and scanning stops.</p>
<p>If the application determines that the discovered network is not the correct one, it may call <a class="el" href="group__networks.html#ga48c6949bbd1c95b595aa6374513557ae" title="See emberScanForJoinableNetwork(). ">emberScanForNextJoinableNetwork()</a> to continue the scanning process where it was left off and find a different joinable network. If the next network is not the correct one, the application can continue to call <a class="el" href="group__networks.html#ga48c6949bbd1c95b595aa6374513557ae" title="See emberScanForJoinableNetwork(). ">emberScanForNextJoinableNetwork()</a>. Each call must occur within 30 seconds of the previous one, otherwise the state of the scan process is deleted to free up memory. Calling <a class="el" href="group__networks.html#ga4eeeaa1118b0ac13e41722a247fcbeac" title="Finds a joinable network. ">emberScanForJoinableNetwork()</a> causes any old state to be forgotten and starts scanning from the beginning.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channelMask</td><td></td></tr>
    <tr><td class="paramname">extendedPanId</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EMBER_LIBRARY_NOT_PRESENT if the form and join library is not available. </dd></dl>

</div>
</div>
<a id="ga48c6949bbd1c95b595aa6374513557ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga48c6949bbd1c95b595aa6374513557ae">&#9670;&nbsp;</a></span>emberScanForNextJoinableNetwork()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a> emberScanForNextJoinableNetwork </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>See <a class="el" href="group__networks.html#ga4eeeaa1118b0ac13e41722a247fcbeac" title="Finds a joinable network. ">emberScanForJoinableNetwork()</a>. </p>

</div>
</div>
<a id="gae2c4bb6f00441f30461203f60f93a176"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae2c4bb6f00441f30461203f60f93a176">&#9670;&nbsp;</a></span>emberScanForUnusedPanId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__status__codes.html#gabdc825a7bb1ce986862f1566accee9aa">EmberStatus</a> emberScanForUnusedPanId </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>channelMask</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Find an unused PAN id. </p>
<p>Does an energy scan on the indicated channels and randomly chooses one from amongst those with the least average energy. Then picks a short PAN id that does not appear during an active scan on the chosen channel. The chosen PAN id and channel are returned via the ::emberUnusedPanIdFoundHandler() callback. If an error occurs, the application is informed via the <a class="el" href="group__networks.html#ga81e2257ef31e6932dfeaaa6fece1abb4" title="A callback the application needs to implement. ">emberScanErrorHandler()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">channelMask</td><td></td></tr>
    <tr><td class="paramname">duration</td><td>The duration of the energy scan. See the documentation for ::emberStartScan() in stack/include/network-formation.h for information on duration values. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>EMBER_LIBRARY_NOT_PRESENT if the form and join library is not available. </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="gaf3f8a852097d6ec543f235ed952c93f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf3f8a852097d6ec543f235ed952c93f9">&#9670;&nbsp;</a></span>emberEnableDualChannelScan</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool emberEnableDualChannelScan</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>With some board layouts, the EM250 and EM260 are susceptible to a dual channel issue in which packets from 12 channels above or below can sometimes be heard faintly. This affects channels 11 - 14 and 23 - 26. Hardware reference designs EM250_REF_DES_LAT, version C0 and EM250_REF_DES_CER, version B0 solve the problem.</p>
<p>Setting the emberEnableDualChannelScan variable to true enables a software workaround to the dual channel issue which can be used with vulnerable boards. After <a class="el" href="group__networks.html#ga4eeeaa1118b0ac13e41722a247fcbeac" title="Finds a joinable network. ">emberScanForJoinableNetwork()</a> discovers a network on one of the susceptible channels, the channel number that differs by 12 is also scanned. If the same network can be heard there, the true channel is determined by comparing the link quality of the received beacons. The default value of emberEnableDualChannelScan is true for the EM250 and EM260. It is not used on other platforms. </p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Sep 10 2020 11:34:17 for EmberZNet API Reference: For the STM32F103RET Host platform by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
