<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Silicon Labs Bluetooth API: NVM</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen_extra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Silicon Labs Bluetooth API
   </div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('group__sl__bt__nvm.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">NVM</div>  </div>
</div><!--header-->
<div class="contents">

<p>NVM.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gac35df372fed2134445476526b1049dc0"><td class="memItemLeft" align="right" valign="top">sl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sl__bt__nvm.html#gac35df372fed2134445476526b1049dc0">sl_bt_nvm_save</a> (uint16_t key, size_t value_len, const uint8_t *value)</td></tr>
<tr class="separator:gac35df372fed2134445476526b1049dc0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf988906c52e4612a9c2eda4151eb2198"><td class="memItemLeft" align="right" valign="top">sl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sl__bt__nvm.html#gaf988906c52e4612a9c2eda4151eb2198">sl_bt_nvm_load</a> (uint16_t key, size_t max_value_size, size_t *value_len, uint8_t *value)</td></tr>
<tr class="separator:gaf988906c52e4612a9c2eda4151eb2198"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf165765a78e2a32831290760bcfa5b3b"><td class="memItemLeft" align="right" valign="top">sl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sl__bt__nvm.html#gaf165765a78e2a32831290760bcfa5b3b">sl_bt_nvm_erase</a> (uint16_t key)</td></tr>
<tr class="separator:gaf165765a78e2a32831290760bcfa5b3b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga946fae2a215deffcff105938f9f587fc"><td class="memItemLeft" align="right" valign="top">sl_status_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sl__bt__nvm.html#ga946fae2a215deffcff105938f9f587fc">sl_bt_nvm_erase_all</a> ()</td></tr>
<tr class="separator:ga946fae2a215deffcff105938f9f587fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="member-group"></a>
Defined Keys</h2></td></tr>
<tr><td class="ititle" colspan="2"><p><a class="anchor" id="amgrpc67531a6a310f08993af4911ad1efc44"></a><a class="anchor" id="nvm_keys"></a> Define keys </p>
</td></tr>
<tr class="memitem:ga2664f0703d08f39c295cd66cfe534461"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__sl__bt__nvm.html#ga2664f0703d08f39c295cd66cfe534461">NVM_KEY_CTUNE</a>&#160;&#160;&#160;0x32</td></tr>
<tr class="separator:ga2664f0703d08f39c295cd66cfe534461"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>NVM. </p>
<p>Provide an interface to manage user data objects (key/value pairs) in the flash memory. User data stored within the flash memory is persistent across reset and power cycling of the device. Because Bluetooth bondings are also stored in this flash area, in addition to the flash storage size, the space available for user data also depends on the number of bondings the device has at the time.</p>
<p>On EFR32[B|M]G1x devices, either PS Store or NVM3 data storage driver can be used. As PS Store is supported by the Bluetooth stack only, using NVM3 is recommended if the device needs to support Dynamic Multiple Protocol (DMP) cases. On EFR32[B|M]G2x devices, only NVM3 is supported. When NVM3 is used, applications can also use the NVM3 APIs directly.</p>
<p>In PS Store, the flash storage size is fixed at 2048 bytes. The maximum data object size associated to a key is 56 bytes. A Bluetooth bonding uses at maximum 138 bytes for secure connections and 174 bytes for legacy pairing.</p>
<p>In NVM3, the flash store size is configurable, and the minimum is 3 flash pages. The maximum data object size is configurable up to 4096 bytes. A Bluetooth bonding uses at maximum 110 bytes for secure connections and 138 bytes for legacy pairing. See more details in AN1135 "Using Third Generation
NonVolatile Memory (NVM3) Data Storage". </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ga2664f0703d08f39c295cd66cfe534461"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2664f0703d08f39c295cd66cfe534461">&#9670;&nbsp;</a></span>NVM_KEY_CTUNE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NVM_KEY_CTUNE&#160;&#160;&#160;0x32</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Crystal tuning value override </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gac35df372fed2134445476526b1049dc0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac35df372fed2134445476526b1049dc0">&#9670;&nbsp;</a></span>sl_bt_nvm_save()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sl_status_t sl_bt_nvm_save </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>value_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const uint8_t *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Store a value into the specified NVM key. Allowed NVM keys are in range from 0x4000 to 0x407F. At most, 56 bytes user data can be stored in one NVM key. Error code 0x018a (command_too_long) is returned if the value data is more than 56 bytes.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>NVM key </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value_len</td><td>Array length </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>Value to store into the specified NVM key</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SL_STATUS_OK if successful. Error code otherwise. </dd></dl>

</div>
</div>
<a id="gaf988906c52e4612a9c2eda4151eb2198"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf988906c52e4612a9c2eda4151eb2198">&#9670;&nbsp;</a></span>sl_bt_nvm_load()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sl_status_t sl_bt_nvm_load </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>max_value_size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t *&#160;</td>
          <td class="paramname"><em>value_len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieve the value of the specified NVM key.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>NVM key of the value to be retrieved </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">max_value_size</td><td>Size of output buffer passed in <code>value</code> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">value_len</td><td>On return, set to the length of output data written to <code>value</code> </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">value</td><td>The returned value of the specified NVM key</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SL_STATUS_OK if successful. Error code otherwise. </dd></dl>

</div>
</div>
<a id="gaf165765a78e2a32831290760bcfa5b3b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf165765a78e2a32831290760bcfa5b3b">&#9670;&nbsp;</a></span>sl_bt_nvm_erase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sl_status_t sl_bt_nvm_erase </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete a single NVM key and its value from the persistent store.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>NVM key to delete</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>SL_STATUS_OK if successful. Error code otherwise. </dd></dl>

</div>
</div>
<a id="ga946fae2a215deffcff105938f9f587fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga946fae2a215deffcff105938f9f587fc">&#9670;&nbsp;</a></span>sl_bt_nvm_erase_all()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">sl_status_t sl_bt_nvm_erase_all </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Delete all NVM keys and their corresponding values.</p>
<dl class="section return"><dt>Returns</dt><dd>SL_STATUS_OK if successful. Error code otherwise. </dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
